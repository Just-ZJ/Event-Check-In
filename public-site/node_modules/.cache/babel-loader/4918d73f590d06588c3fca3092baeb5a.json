{"ast":null,"code":"import _slicedToArray from\"/mnt/d/D_Drive_Folders/VS Code Workspace/event-check-in/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{child,get,getDatabase,ref,set}from\"firebase/database\";import{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export function CheckIn(){var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var onSubmitEvent=function onSubmitEvent(event){//prevent the default form submission\nevent.preventDefault();var db=getDatabase();//check if person has signed up - whether name can be found in database\nget(child(ref(db),\"names/\".concat(name))).then(function(snapshot){if(snapshot.exists()){//update json in realtime database\nset(ref(db,\"names/\".concat(name)),{checkin:true});console.log(\"\".concat(name,\" has been checked in\"));//redirect to success page\nnavigate(\"/success\",{state:{success:true,message:\"\".concat(name,\" has successfully checked-in.\")}});}else{//redirect to failure - not found\nconsole.log(\"No data available for \".concat(name));navigate(\"/failure\",{state:{success:false,message:\"\".concat(name,\" could not be found in the sign-up list.\")}});}}).catch(function(error){//redirect to failure - error\nnavigate(\"/failure\",{state:{success:false,message:\"Error: \".concat(error)}});console.error(error);});};var onChangeInput=function onChangeInput(event){setName(event.target.value);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"w-75 p-3 m-auto\",onSubmit:onSubmitEvent,children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"name\",children:\"\\u59D3\\u540D\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",class:\"form-control\",placeholder:\"Enter Name\",onChange:onChangeInput}),/*#__PURE__*/_jsx(\"small\",{class:\"form-text text-muted my-3\",children:\"Please enter your full name. \\u8BF7\\u8F93\\u5165\\u5168\\u540D\\u3002\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn btn-primary m-auto align-middle\",children:\"Check In\"})]})});}","map":{"version":3,"names":["child","get","getDatabase","ref","set","useState","useNavigate","CheckIn","navigate","name","setName","onSubmitEvent","event","preventDefault","db","then","snapshot","exists","checkin","console","log","state","success","message","catch","error","onChangeInput","target","value"],"sources":["/mnt/d/D_Drive_Folders/VS Code Workspace/event-check-in/public-site/src/components/CheckIn.js"],"sourcesContent":["import { child, get, getDatabase, ref, set } from \"firebase/database\";\nimport { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport function CheckIn() {\n  const navigate = useNavigate();\n  const [name, setName] = useState(\"\");\n\n  const onSubmitEvent = (event) => {\n    //prevent the default form submission\n    event.preventDefault();\n\n    const db = getDatabase();\n    //check if person has signed up - whether name can be found in database\n    get(child(ref(db), `names/${name}`))\n      .then((snapshot) => {\n        if (snapshot.exists()) {\n          //update json in realtime database\n          set(ref(db, `names/${name}`), { checkin: true });\n          console.log(`${name} has been checked in`);\n          //redirect to success page\n          navigate(\"/success\", {\n            state: {\n              success: true,\n              message: `${name} has successfully checked-in.`,\n            },\n          });\n        } else {\n          //redirect to failure - not found\n          console.log(`No data available for ${name}`);\n          navigate(\"/failure\", {\n            state: {\n              success: false,\n              message: `${name} could not be found in the sign-up list.`,\n            },\n          });\n        }\n      })\n      .catch((error) => {\n        //redirect to failure - error\n        navigate(\"/failure\", {\n          state: {\n            success: false,\n            message: `Error: ${error}`,\n          },\n        });\n        console.error(error);\n      });\n  };\n\n  const onChangeInput = (event) => {\n    setName(event.target.value);\n  };\n\n  return (\n    <>\n      <form className=\"w-75 p-3 m-auto\" onSubmit={onSubmitEvent}>\n        <div class=\"form-group\">\n          <label for=\"name\">姓名</label>\n          <input\n            type=\"text\"\n            id=\"name\"\n            class=\"form-control\"\n            placeholder=\"Enter Name\"\n            onChange={onChangeInput}\n          />\n          <small class=\"form-text text-muted my-3\">\n            Please enter your full name. 请输入全名。\n          </small>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary m-auto align-middle\">\n          Check In\n        </button>\n      </form>\n    </>\n  );\n}\n"],"mappings":"6IAAA,OAASA,KAAT,CAAgBC,GAAhB,CAAqBC,WAArB,CAAkCC,GAAlC,CAAuCC,GAAvC,KAAkD,mBAAlD,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,6IAEA,MAAO,SAASC,QAAT,EAAmB,CACxB,GAAMC,SAAQ,CAAGF,WAAW,EAA5B,CACA,cAAwBD,QAAQ,CAAC,EAAD,CAAhC,wCAAOI,IAAP,eAAaC,OAAb,eAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAACC,KAAD,CAAW,CAC/B;AACAA,KAAK,CAACC,cAAN,GAEA,GAAMC,GAAE,CAAGZ,WAAW,EAAtB,CACA;AACAD,GAAG,CAACD,KAAK,CAACG,GAAG,CAACW,EAAD,CAAJ,iBAAmBL,IAAnB,EAAN,CAAH,CACGM,IADH,CACQ,SAACC,QAAD,CAAc,CAClB,GAAIA,QAAQ,CAACC,MAAT,EAAJ,CAAuB,CACrB;AACAb,GAAG,CAACD,GAAG,CAACW,EAAD,iBAAcL,IAAd,EAAJ,CAA2B,CAAES,OAAO,CAAE,IAAX,CAA3B,CAAH,CACAC,OAAO,CAACC,GAAR,WAAeX,IAAf,0BACA;AACAD,QAAQ,CAAC,UAAD,CAAa,CACnBa,KAAK,CAAE,CACLC,OAAO,CAAE,IADJ,CAELC,OAAO,WAAKd,IAAL,iCAFF,CADY,CAAb,CAAR,CAMD,CAXD,IAWO,CACL;AACAU,OAAO,CAACC,GAAR,iCAAqCX,IAArC,GACAD,QAAQ,CAAC,UAAD,CAAa,CACnBa,KAAK,CAAE,CACLC,OAAO,CAAE,KADJ,CAELC,OAAO,WAAKd,IAAL,4CAFF,CADY,CAAb,CAAR,CAMD,CACF,CAvBH,EAwBGe,KAxBH,CAwBS,SAACC,KAAD,CAAW,CAChB;AACAjB,QAAQ,CAAC,UAAD,CAAa,CACnBa,KAAK,CAAE,CACLC,OAAO,CAAE,KADJ,CAELC,OAAO,kBAAYE,KAAZ,CAFF,CADY,CAAb,CAAR,CAMAN,OAAO,CAACM,KAAR,CAAcA,KAAd,EACD,CAjCH,EAkCD,CAxCD,CA0CA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAACd,KAAD,CAAW,CAC/BF,OAAO,CAACE,KAAK,CAACe,MAAN,CAAaC,KAAd,CAAP,CACD,CAFD,CAIA,mBACE,sCACE,cAAM,SAAS,CAAC,iBAAhB,CAAkC,QAAQ,CAAEjB,aAA5C,wBACE,aAAK,KAAK,CAAC,YAAX,wBACE,cAAO,GAAG,CAAC,MAAX,0BADF,cAEE,cACE,IAAI,CAAC,MADP,CAEE,EAAE,CAAC,MAFL,CAGE,KAAK,CAAC,cAHR,CAIE,WAAW,CAAC,YAJd,CAKE,QAAQ,CAAEe,aALZ,EAFF,cASE,cAAO,KAAK,CAAC,2BAAb,+EATF,GADF,cAcE,eAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAC,qCAA5B,sBAdF,GADF,EADF,CAsBD"},"metadata":{},"sourceType":"module"}