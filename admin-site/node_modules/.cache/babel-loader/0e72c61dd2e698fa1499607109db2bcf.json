{"ast":null,"code":"import _slicedToArray from\"/mnt/d/D_Drive_Folders/VS Code Workspace/event-check-in/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{getDatabase,ref,child,get,set}from\"firebase/database\";import{useState}from\"react\";import{Person}from\"./Person\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var dataRendering=function dataRendering(data){return data==null?/*#__PURE__*/_jsx(_Fragment,{}):Object.keys(data).map(function(person,i){return/*#__PURE__*/_jsx(Person,{data:data,person:person,path:\"names/\".concat(person)},i);});};export function Admin(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),json=_useState4[0],setJson=_useState4[1];//read json from database\nvar database=ref(getDatabase());get(child(database,\"names\")).then(function(snapshot){if(snapshot.exists()){setData(snapshot.val());}else{console.log(\"No data available\");}}).catch(function(error){console.error(error);});var onChangeEvent=function onChangeEvent(event){//create json object form list of names\nvar names=event.target.value.split(/\\n/);var jsonObj={names:{}};names.forEach(function(name){jsonObj.names[name.trim()]={checkin:false};});setJson(jsonObj);};var onSubmitEvent=function onSubmitEvent(){var db=getDatabase();console.log(json);set(ref(db,\"/\"),json);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 align-middle w-50 m-auto text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"my-5\",children:\"List of Attendees\"}),dataRendering(data)]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group w-50 m-auto mt-5\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"namesInput\",children:\"Enter list of names\"}),/*#__PURE__*/_jsx(\"textarea\",{class:\"form-control\",id:\"namesInput\",rows:\"5\",onChange:onChangeEvent}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn btn-primary m-auto my-3\",onClick:onSubmitEvent,children:\"Add List\"})]})]});}","map":{"version":3,"names":["getDatabase","ref","child","get","set","useState","Person","dataRendering","data","Object","keys","map","person","i","Admin","setData","json","setJson","database","then","snapshot","exists","val","console","log","catch","error","onChangeEvent","event","names","target","value","split","jsonObj","forEach","name","trim","checkin","onSubmitEvent","db"],"sources":["/mnt/d/D_Drive_Folders/VS Code Workspace/event-check-in/admin-site/src/components/Admin.js"],"sourcesContent":["import { getDatabase, ref, child, get, set } from \"firebase/database\";\nimport { useState } from \"react\";\n\nimport { Person } from \"./Person\";\n\nconst dataRendering = (data) => {\n  return data == null ? (\n    <></>\n  ) : (\n    Object.keys(data).map((person, i) => {\n      return (\n        <Person key={i} data={data} person={person} path={`names/${person}`} />\n      );\n    })\n  );\n};\n\nexport function Admin() {\n  const [data, setData] = useState(null);\n  const [json, setJson] = useState({});\n  //read json from database\n  const database = ref(getDatabase());\n  get(child(database, \"names\"))\n    .then((snapshot) => {\n      if (snapshot.exists()) {\n        setData(snapshot.val());\n      } else {\n        console.log(\"No data available\");\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n    });\n\n  const onChangeEvent = (event) => {\n    //create json object form list of names\n    let names = event.target.value.split(/\\n/);\n    let jsonObj = { names: {} };\n    names.forEach((name) => {\n      jsonObj.names[name.trim()] = { checkin: false };\n    });\n    setJson(jsonObj);\n  };\n\n  const onSubmitEvent = () => {\n    const db = getDatabase();\n    console.log(json);\n    set(ref(db, \"/\"), json);\n  };\n\n  return (\n    <>\n      <div className=\"mb-3 align-middle w-50 m-auto text-center\">\n        <h2 className=\"my-5\">List of Attendees</h2>\n        {dataRendering(data)}\n      </div>\n      <div class=\"form-group w-50 m-auto mt-5\">\n        <label for=\"namesInput\">Enter list of names</label>\n        <textarea\n          class=\"form-control\"\n          id=\"namesInput\"\n          rows=\"5\"\n          onChange={onChangeEvent}\n        ></textarea>\n        <button\n          type=\"submit\"\n          class=\"btn btn-primary m-auto my-3\"\n          onClick={onSubmitEvent}\n        >\n          Add List\n        </button>\n      </div>\n    </>\n  );\n}\n"],"mappings":"6IAAA,OAASA,WAAT,CAAsBC,GAAtB,CAA2BC,KAA3B,CAAkCC,GAAlC,CAAuCC,GAAvC,KAAkD,mBAAlD,CACA,OAASC,QAAT,KAAyB,OAAzB,CAEA,OAASC,MAAT,KAAuB,UAAvB,C,6IAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAACC,IAAD,CAAU,CAC9B,MAAOA,KAAI,EAAI,IAAR,cACL,kBADK,CAGLC,MAAM,CAACC,IAAP,CAAYF,IAAZ,EAAkBG,GAAlB,CAAsB,SAACC,MAAD,CAASC,CAAT,CAAe,CACnC,mBACE,KAAC,MAAD,EAAgB,IAAI,CAAEL,IAAtB,CAA4B,MAAM,CAAEI,MAApC,CAA4C,IAAI,iBAAWA,MAAX,CAAhD,EAAaC,CAAb,CADF,CAGD,CAJD,CAHF,CASD,CAVD,CAYA,MAAO,SAASC,MAAT,EAAiB,CACtB,cAAwBT,QAAQ,CAAC,IAAD,CAAhC,wCAAOG,IAAP,eAAaO,OAAb,eACA,eAAwBV,QAAQ,CAAC,EAAD,CAAhC,yCAAOW,IAAP,eAAaC,OAAb,eACA;AACA,GAAMC,SAAQ,CAAGjB,GAAG,CAACD,WAAW,EAAZ,CAApB,CACAG,GAAG,CAACD,KAAK,CAACgB,QAAD,CAAW,OAAX,CAAN,CAAH,CACGC,IADH,CACQ,SAACC,QAAD,CAAc,CAClB,GAAIA,QAAQ,CAACC,MAAT,EAAJ,CAAuB,CACrBN,OAAO,CAACK,QAAQ,CAACE,GAAT,EAAD,CAAP,CACD,CAFD,IAEO,CACLC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACD,CACF,CAPH,EAQGC,KARH,CAQS,SAACC,KAAD,CAAW,CAChBH,OAAO,CAACG,KAAR,CAAcA,KAAd,EACD,CAVH,EAYA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAACC,KAAD,CAAW,CAC/B;AACA,GAAIC,MAAK,CAAGD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmBC,KAAnB,CAAyB,IAAzB,CAAZ,CACA,GAAIC,QAAO,CAAG,CAAEJ,KAAK,CAAE,EAAT,CAAd,CACAA,KAAK,CAACK,OAAN,CAAc,SAACC,IAAD,CAAU,CACtBF,OAAO,CAACJ,KAAR,CAAcM,IAAI,CAACC,IAAL,EAAd,EAA6B,CAAEC,OAAO,CAAE,KAAX,CAA7B,CACD,CAFD,EAGApB,OAAO,CAACgB,OAAD,CAAP,CACD,CARD,CAUA,GAAMK,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1B,GAAMC,GAAE,CAAGvC,WAAW,EAAtB,CACAuB,OAAO,CAACC,GAAR,CAAYR,IAAZ,EACAZ,GAAG,CAACH,GAAG,CAACsC,EAAD,CAAK,GAAL,CAAJ,CAAevB,IAAf,CAAH,CACD,CAJD,CAMA,mBACE,wCACE,aAAK,SAAS,CAAC,2CAAf,wBACE,WAAI,SAAS,CAAC,MAAd,+BADF,CAEGT,aAAa,CAACC,IAAD,CAFhB,GADF,cAKE,aAAK,KAAK,CAAC,6BAAX,wBACE,cAAO,GAAG,CAAC,YAAX,iCADF,cAEE,iBACE,KAAK,CAAC,cADR,CAEE,EAAE,CAAC,YAFL,CAGE,IAAI,CAAC,GAHP,CAIE,QAAQ,CAAEmB,aAJZ,EAFF,cAQE,eACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,6BAFR,CAGE,OAAO,CAAEW,aAHX,sBARF,GALF,GADF,CAwBD"},"metadata":{},"sourceType":"module"}